<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="–ï–≥–æ—Ä—ã—á ‚Äî —Ç–≤–æ–π —Ä–æ–¥–Ω–æ–π –Ω–µ–π—Ä–æ–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç."/>
  <title>–ï–≥–æ—Ä—ã—á</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ‚úÖ –í—Ä–∞–ø–ø–µ—Ä –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ -->
  <div id="chat-wrapper" class="chat-wrapper">
    <div id="chat" class="chat-container">
      <!-- –ë–∞–±–ª—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç—É—Ç -->
    </div>
  </div>

  <!-- ‚úÖ –ö–∞–º–µ—Ä–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
  <div id="cameraPreview" class="camera-preview">
    <video id="video" autoplay playsinline></video>
    <div class="camera-buttons">
      <button class="camera-btn" onclick="takePhoto()">üì∏</button>
      <button class="camera-btn" onclick="closeCamera()">‚ùå</button>
    </div>
  </div>

  <!-- ‚úÖ –ü—Ä–µ–≤—å—é –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ -->
  <div id="filePreview" style="display: none; position: fixed; bottom: 115px; left: 50%; transform: translateX(-50%); background: rgba(255,255,255,0.9); padding: 10px 20px; border-radius: 20px; max-width: 90%; font-family: 'Pragmatica', sans-serif; font-size: 16px; display: flex; align-items: center; gap: 10px;">
    <span id="fileName" style="overflow-wrap: anywhere;"></span>
    <button id="removeFileBtn" style="background: none; border: none; font-size: 20px; cursor: pointer; color: #F00;">‚úñ</button>
  </div>

  <!-- ‚úÖ –ò–Ω–ø—É—Ç –∏ –∫–Ω–æ–ø–∫–∏ -->
  <div class="input-container">
    <input id="textInput" type="text" placeholder="–ß—Ç–æ –Ω–∞ –¥—É—à–µ?" autocomplete="off" />
    
    <label for="fileInput" class="icon-clip">
      <img src="assets/ant-design_paper-clip-outlined.svg" alt="–°–∫—Ä–µ–ø–∫–∞" />
    </label>
    <input id="fileInput" type="file" style="display:none" />

    <img class="icon-camera" src="assets/fluent_camera.svg" alt="–ö–∞–º–µ—Ä–∞" onclick="openCamera()" />

    <div id="sendBtn" class="send-button">
      <img class="send-icon" src="assets/send-button.svg" alt="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" />
    </div>
  </div>

  <!-- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç -->
  <script type="module" src="script.js"></script>

  <!-- ‚úÖ –ü—Ä–µ–≤—å—é –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ -->
  <script>
    const fileInput = document.getElementById("fileInput");
    const filePreview = document.getElementById("filePreview");
    const fileNameEl = document.getElementById("fileName");
    const removeFileBtn = document.getElementById("removeFileBtn");

    fileInput.addEventListener("change", () => {
      const file = fileInput.files[0];
      if (!file) return;

      fileNameEl.textContent = file.name;
      filePreview.style.display = "flex";

      // –µ—Å–ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞
      if (file.type.startsWith("image/")) {
        const reader = new FileReader();
        reader.onload = () => {
          fileNameEl.innerHTML = `<img src="${reader.result}" style="max-height:60px; border-radius:10px;">`;
        };
        reader.readAsDataURL(file);
      }
    });

    removeFileBtn.addEventListener("click", () => {
      fileInput.value = "";
      filePreview.style.display = "none";
    });
  </script>

</body>
</html>
